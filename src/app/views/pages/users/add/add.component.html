<app-breadcrumb></app-breadcrumb>

<div class="row">
  <div class="col-md-12 stretch-card">
    <div class="card">
      <div class="card-body">
        <form class="forms-sample" (submit)="onSubmit($event)">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Select Company <span class="text-danger">*</span></label>
              <ng-select
                [items]="companies"
                bindLabel="name"
                bindValue="id"
                [(ngModel)]="formData.company_id"
                name="company_id"
                placeholder="Select one"
                [searchable]="true"
                (change)="clearError('company_id')"
                [ngModelOptions]="{standalone: false}">
              </ng-select>
              <div class="text-danger mt-1" *ngIf="formErrors.company_id">
                {{ formErrors.company_id[0] }}
              </div>
            </div>
            
            <div class="col-md-3 mb-3">
              <label class="form-label">First Name <span class="text-danger">*</span></label>
              <input type="text" class="form-control" name="first_name" [(ngModel)]="formData.first_name" (ngModelChange)="clearError('first_name')">
              <div class="text-danger mt-1" *ngIf="formErrors.first_name">{{ formErrors.first_name[0] }}</div>
            </div>
        
            <div class="col-md-3 mb-3">
              <label class="form-label">Last Name</label>
              <input type="text" class="form-control" name="last_name" [(ngModel)]="formData.last_name" (ngModelChange)="clearError('last_name')">
              <div class="text-danger mt-1" *ngIf="formErrors.last_name">{{ formErrors.last_name[0] }}</div>
            </div>
        
            <div class="col-md-3 mb-3">
              <label class="form-label">Username</label>
              <input type="text" class="form-control" name="username" [(ngModel)]="formData.username" (ngModelChange)="clearError('username')">
              <div class="text-danger mt-1" *ngIf="formErrors.username">{{ formErrors.username[0] }}</div>
            </div>

            <div class="col-md-3 mb-3">
              <label class="form-label">Email Address <span class="text-danger">*</span></label>
              <input type="email" class="form-control" name="email" [(ngModel)]="formData.email" (ngModelChange)="clearError('email')">
              <div class="text-danger mt-1" *ngIf="formErrors.email">{{ formErrors.email[0] }}</div>
            </div>
        
            <div class="col-md-3 mb-3">
              <label class="form-label">Date of Birth</label>
              <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd" name="date_of_birth" ngbDatepicker #dob="ngbDatepicker" [(ngModel)]="formData.date_of_birth" (ngModelChange)="clearError('date_of_birth')">
                <button class="input-group-text" type="button" (click)="dob.toggle()">
                  <i class="feather icon-calendar icon-md text-secondary"></i>
                </button>
              </div>
              <div class="text-danger mt-1" *ngIf="formErrors.date_of_birth">{{ formErrors.date_of_birth[0] }}</div>
            </div>
            
            <div class="col-md-3 mb-3">
              <label class="form-label">Select City</label>
              <ng-select
                [items]="cities"
                bindLabel="name"
                bindValue="id"
                [(ngModel)]="formData.city_id"
                name="city_id"
                placeholder="Select one"
                [searchable]="true"
                [appendTo]="'body'"
                (change)="clearError('city_id')">
              </ng-select>
              <div class="text-danger mt-1" *ngIf="formErrors.city_id">{{ formErrors.city_id[0] }}</div>
            </div>
        
            <div class="col-md-3 mb-3">
              <label class="form-label">Select Gender <span class="text-danger">*</span></label>
              <ng-select
                [items]="gender"
                bindLabel="name"
                bindValue="id"
                [(ngModel)]="formData.gender"
                name="gender"
                placeholder="Select one"
                [searchable]="false"
                (change)="clearError('gender')">
              </ng-select>
              <div class="text-danger mt-1" *ngIf="formErrors.gender">{{ formErrors.gender[0] }}</div>
            </div>
        
            <div class="col-md-3 mb-3">
              <label class="form-label">Phone Number</label>
              <input type="text" class="form-control" name="phone_number" [(ngModel)]="formData.phone_number" (ngModelChange)="clearError('phone_number')">
              <div class="text-danger mt-1" *ngIf="formErrors.phone_number">{{ formErrors.phone_number[0] }}</div>
            </div>
        
            <div class="col-md-3 mb-3">
              <label class="form-label">Select Status <span class="text-danger">*</span></label>
              <ng-select
                [items]="status"
                bindLabel="name"
                bindValue="id"
                [(ngModel)]="formData.status"
                name="status"
                placeholder="Select one"
                [searchable]="false"
                (change)="clearError('status')">
              </ng-select>
              <div class="text-danger mt-1" *ngIf="formErrors.status">{{ formErrors.status[0] }}</div>
            </div>
        
            <div class="col-md-12 mb-3">
              <label class="form-label">Address</label>
              <textarea class="form-control" name="address" rows="3" [(ngModel)]="formData.address" (ngModelChange)="clearError('address')"></textarea>
              <div class="text-danger mt-1" *ngIf="formErrors.address">{{ formErrors.address[0] }}</div>
            </div>
        
            <!-- Form Actions -->
            <div class="col-12 mt-3">
              <button type="submit" [disabled]="isLoading" class="btn btn-primary">Save Changing</button>
            </div>

            <div class="col-12 mt-3" *ngIf="globalErrorMessage">
              <div class="alert alert-danger text-center">
                {{ globalErrorMessage }}
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>